
---

title: "Persistent Identifier"
mcr_version: ['2018.06','2019.06']
author: ['Kathleen Neumann']
description: "
      MyCoRe bietet verschiedene Möglichkeiten an, Persistente Identifier zu generieren. Es ist
      möglich URNs oder Handle zu erzeugen. Für die Registrierung einer DOI wird aktuell ein
      Stylesheet angeboten, das aus MyCoRe-MODS-Objekten ein datacite-Format generiert, das dann
      entsprechend zur Registrierung genutzt werden kann.
    "
date: "2019-11-05"

---

    <h2>DOI-Registrierung</h2>
    <p>
      Um DOIs aus der MyCoRe-Anwendung heraus zu prägen und beispielsweise bei DataCite über die REST-API
      zu registrieren stellt MyCoRe die Komponente <code>mycore-pi</code> mit einer entsprechenden Implementierung
      bereit. Mit der folgenden Konfiguration kann die DOI-Registrierung bei Datacite aktiviert werden. Diese
      Beispielkonfiguration geht von MyCoRe-MODS als Datenmodell aus. Für ein anderes Datenmodell müsste entsprechend
      ein eigener Transformer und Inscriber implementiert werden.
    </p>
    <p>
    {{< highlight bash "linenos=table">}}
  MCR.DOI.Prefix=10.5072
  MCR.DOI.HostingInstitution=MyCoRe Community
  MCR.DOI.NISSPattern=yyyyMMdd-HHmmss
  MCR.PI.Registration.Datacite=org.mycore.pi.doi.MCRDOIRegistrationService
  MCR.PI.Registration.Datacite.MetadataManager=MODSDOI
  MCR.PI.Registration.Datacite.Generator=DateDOI
  MCR.PI.Registration.Datacite.RegisterBaseURL=https://intr2dok.vifa-recht.de
  MCR.PI.Registration.Datacite.Username=
  MCR.PI.Registration.Datacite.Password=
#  MCR.PI.Registration.Datacite.UseTestServer=true

  MCR.PI.Registration.Datacite.Transformer=datacite
  MCR.PI.Generator.UUIDDOI=org.mycore.pi.doi.MCRUUIDDOIGenerator
  MCR.PI.Generator.DateDOI=org.mycore.pi.doi.MCRCreateDateDOIGenerator
  MCR.PI.MetadataManager.MODSDOI=org.mycore.mods.identifier.MCRMODSDOIPersistentIdentifierMetadataManager
  MCR.PI.Parsers.doi=org.mycore.pi.doi.MCRDOIParser{{< /highlight >}}
    </p>
    <p>
      <span class="badge badge-danger">Achtung!</span> für die Version 2018.06 muss ein JobUser spezifiziert werden, der
      dann entsprechende Rechte hat das MyCoRe-Objekt zu bearbeiten um DOI und Service-Flags zu ergänzen. Wenn kein Nutzer
      gesetzt ist, dann ist das der "System" Nutzer, dieser hat aus Sicherheitsgründen keine Schreibrechte.
      Ab Version 2019.06 wird für PI der MCRJanitor genutzt.
    </p>
    <p>
    {{< highlight bash "linenos=table">}}
  MCR.PI.Registration.Datacite.JobApiUser=dataciteBot{{< /highlight >}}
    </p>

    <p>
      <span class="badge badge-danger">Achtung!</span> für die Version 2016.06: In dieser Version heisst der MetadataManager noch Inscriber!
    </p>
    <p>
    {{< highlight bash "linenos=table">}}
  MCR.PI.Registration.Datacite.Inscriber=MODSDOI
  MCR.PI.Inscriber.MODSDOI=org.mycore.mods.identifier.MCRMODSDOIPersistentIdentifierInscriber{{< /highlight >}}
    </p>
    <p>
      Für den Umstieg auf Version 2018.06 muss ebenfalls eine Migration der Properties erfolgen.
      Details dazu siehe <a href="https://github.com/MyCoRe-Org/mycore/tree/master/mycore-migration">mycore-migration</a>.
    </p>
    <p>
      Nachdem die Anwendung entsprechend konfiguriert wurde, kann mittels des URL-Parameters
      <code>XSL.Transformer=datacite</code> das datacite-XML abgerufen werden. Sollte im MODS
      bereits eine DOI angegeben sein, wird diese angezeigt. Ist noch keine DOI erfasst, wird
      diese entsprechend der Konfiguration erstellt.
    </p>
    <div>{{< mcr-figure src="/images/documentation/interfaces/register_doi_menu.png" class="border border-secondary" label="" caption="" alt="MIR-Aktionen-Menü mit aktivierter DOI-Registrierung" width="" height="" />}}</div>
    <p>
      Die Anwendung MIR stellt diese Funktionalität bereit, wenn das entsprechende Property
      <code>MIR.registerDOI=true</code> gesetzt wird. Dann erscheint im Aktionen-Menü eines
      einzelnen Objektes ein weiterer Menüpunkt "DOI Registrieren".
    </p>

    <h2>URN-Registrierung</h2>
    <p>
      Die Konfiguration für URN erfolgt analog zu DOI. Eine Beispiel für eine Konfiguration kann in
      den <a href="https://github.com/MyCoRe-Org/mir/blob/master/mir-module/src/main/resources/config/mir/mycore.properties#L81"
      >MIR-Properties</a> gefunden werden.
    </p>
